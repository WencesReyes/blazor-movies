@page "/"

@*<p>Hello, @StringUtilities.Capitalize(Nombre)</p>

<p>2 + 2 = @(2 + 2)</p>

<button type="button" @onclick=@OnClickHanlder>Clic me</button>*@

@*@foreach(var pelicula in Peliculas)
{
    <div>
        <h3>Movie</h3>
        <p>Title: <strong>@pelicula.Title</strong></p>
        <p>Lauch date: <strong>@pelicula.LaunchDate.ToString("dd MMM yyyy")</strong></p>
    </div>
}*@

@if (Peliculas == null)
{
    <div class="text-center">
        <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>
}
else if (Peliculas.Count() == 0)
{
    <p>No hay películas para mostrar!</p>
}
else {
    <h3>Movies</h3>
    @for (int i = 0; i < Peliculas.Count(); i++)
    {
        <div>
            <p>@(i + 1)) Title: @((MarkupString)Peliculas[i].Title)</p>
            <p>Lauch date: @Peliculas[i].LaunchDate.ToString("dd MMM yyyy")</p>
        </div>
    }
}

@code {
    string Nombre { get; } = "Wences";

    public Pelicula Pelicula { get => GetMovie(); }

    public List<Pelicula> Peliculas { get; set; }

    protected override async Task OnInitializedAsync()
    {
        await Task.Delay(3000);
        Peliculas = GetMovies();
    }

    private Pelicula GetMovie() => new Pelicula() 
    {
        Title = "Spide-Man",
        LaunchDate = new DateTime(2019, 9, 27)
    };

    private List<Pelicula> GetMovies() => new List<Pelicula>() {
        new Pelicula
        {
            Title = "<b>Moana</b>",
            LaunchDate = new DateTime(2012, 8, 1)
        },
        new Pelicula
        {
            Title = "Spide-Man",
            LaunchDate = new DateTime(2019, 9, 27)
        },
        new Pelicula
        {
            Title = "<i>Titanic</i>",
            LaunchDate = new DateTime(2015, 12, 10)
        }
    };

    void OnClickHanlder()
    {
        Console.WriteLine("You clicked me!");
    }
}